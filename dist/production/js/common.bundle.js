"use strict";(self.webpackChunkfilters=self.webpackChunkfilters||[]).push([[592],{787:(e,t,i)=>{function r(e){var t=this;return t.options=e,t.events={},t.items=[],t.filters={},t.active_filters=[],t.fields={},t.debounce,t.settings("items",null),t.settings("debounce_duration",500),t.settings("return_data","id"),this}i.d(t,{Z:()=>n}),console.log("FF_Filters"),r.prototype.settings=function(e,t){void 0!==this.options[e]?this[e]=this.options[e]:this[e]=t},r.prototype.on=function(e,t){var i=this;void 0===i.events[e]&&(i.events[e]=[]),i.events[e].push(t)},r.prototype.event_dispatcher=function(e,t){void 0!==this.events[e]&&this.events[e].forEach((function(e){e(t)}))},r.prototype.set_items=function(e){this.items=e},r.prototype.set=function(e,t){this.filters[e]=t},r.prototype.add=function(e,t){this.filters[e].push(t)},r.prototype.remove=function(e,t){var i=this.filters[e].indexOf(t);-1!==i&&this.filters[e].splice(i,1)},r.prototype.update=function(){var e=this,t=e.filter_items();e.event_dispatcher("update",{items_to_show:t,active_filters:e.active_filters})},r.prototype.debounced_update=function(){var e=this;clearTimeout(e.debounce),e.debounce=setTimeout((function(){e.update()}),e.debounce_duration)},r.prototype.add_field=function(e){var t=this;switch(e.type){case"items_single":t.init_type_items_single(e);break;case"items_multiple":t.init_type_items_multiple(e);break;case"dropdown":t.init_type_dropdown(e);break;case"dropdown_multiple":t.init_type_dropdown_multiple(e)}},r.prototype.prepare_field=function(e){var t;if("string"==typeof e.el){if(!(t=document.querySelector(e.el)))return void console.error("cannot find element ",e.el)}else void 0!==(t=e.el)[0]&&(t=t[0]);var i=void 0!==e.key?e.key:t.dataset.filterKey;this.fields[i]=e;var r=void 0!==e.key?e.filter_type:"default",n=this.fields[i];return n.el=t,n.key=i,n.filter_type=r,n},r.prototype.filter_items=function(){var e=this;e.active_filters=e.get_active_filters();var t=[];return e.items.forEach((function(i){e.active_filters.length&&!e.show_item(i,e.active_filters)||t.push(e.return_item(i))})),t},r.prototype.return_item=function(e){return"all"==this.return_data?e:e[this.return_data]},r.prototype.show_item=function(e,t){for(var i=0;i<r.length;i++){var n=t[i],s=e[n.key];if(s)if("range"!=this.fields[n.key].filter_type){if("object"==typeof n.value){if("object"==typeof s){for(var o=!1,a=0;a<s.length;a++)if(-1!==n.value.indexOf(s[a])){o=!0;break}if(!o)return!1}else if(-1===n.value.indexOf(s))return!1}else if("object"==typeof s){if(-1===s.indexOf(n.value))return!1}else if(s!=n.value)return!1}else{var l=n.value.split(","),c=parseInt(l[0]),u=parseInt(l[1]);if(c>s||u<s)return!1}}return!0},r.prototype.get_active_filters=function(){var e=this,t=[];return Object.keys(e.filters).forEach((function(i){var r=e.filters[i];("object"!=typeof r||r.length)&&r&&t.push({key:i,value:r})})),t},r.prototype.init_type_dropdown=function(e){var t=this,i=t.prepare_field(e);i.current_value="",e.el.addEventListener("change",(function(e){t.event_dispatcher("change_"+i.key,{el:e.target,value:this.value,key:i.key}),this.value!=i.current_value&&(i.current_value=this.value,t.set(i.key,this.value),t.update())})),void 0!==e.choices&&e.choices.forEach((function(t){e.el.append('<option value="'+t+'">'+t+"</option>")}))},r.prototype.init_type_dropdown_multiple=function(e){var t=this,i=t.prepare_field(e);t.filters[i.key]=[],e.el.addEventListener("change",(function(r){this.value&&-1===t.filters[i.key].indexOf(this.value)&&(t.event_dispatcher("change_"+i.key,{el:r.target,value:this.value,key:i.key}),t.add(i.key,this.value),t.update(),e.el.value="")})),void 0!==e.choices&&e.choices.forEach((function(t){e.el.append('<option value="'+t+'">'+t+"</option>")}))},r.prototype.init_type_items_single=function(e){var t=this,i=t.prepare_field(e);i.items=e.el.querySelectorAll(".filter-item"),i.current_selected=e.el.querySelector(".selected"),i.items.forEach((r=>{r.addEventListener("click",(n=>{if(r.classList.contains("selected")){if(void 0!==e.unselect&&!e.unselect)return;r.classList.remove("selected"),i.current_selected=null;var s=""}else r.classList.add("selected"),i.current_selected&&i.current_selected.classList.remove("selected"),i.current_selected=r,s=r.dataset.filterValue;t.set(i.key,s),t.event_dispatcher("change_"+i.key,{el:n.target,value:s,key:i.key}),t.update()}))}))},r.prototype.init_type_items_multiple=function(e){var t=this,i=t.prepare_field(e);t.filters[i.key]=[],i.items=e.el.querySelectorAll(".filter-item"),i.items.forEach((e=>{e.addEventListener("click",(r=>{var n=e.dataset.filterValue;e.classList.toggle("selected"),e.classList.contains("selected")?t.add(i.key,n):t.remove(i.key,n),t.event_dispatcher("change_"+i.key,{el:r.target,value:n,key:i.key}),t.debounced_update()}))}))};const n=r},409:(e,t,i)=>{var r=i(787);function n(e){var t=this;if(t.options=e,t.el=e.el,t.typing_timeout=null,t.search_string="",t.events={},t.settings("items",null),t.settings("typing_duration",1e3),t.settings("search_fields","el"),t.settings("return_data","el"),"string"==typeof e.el){if(t.el=document.querySelector(e.el),!t.el)return void console.error("cannot find element ",e.el)}else t.el=e.el,void 0!==t.el[0]&&(t.el=t.el[0]);return t.el.addEventListener("keyup",(e=>{t.input_typing(e)})),t.el.addEventListener("change",(e=>{t.submit(e.target.value)})),t.el.addEventListener("search",(e=>{t.submit(e.target.value)})),this}console.log("FF_Search"),n.prototype.settings=function(e,t){void 0!==this.options[e]?this[e]=this.options[e]:this[e]=t},n.prototype.on=function(e,t){var i=this;void 0===i.events[e]&&(i.events[e]=[]),i.events[e].push(t)},n.prototype.event_dispatcher=function(e,t){void 0!==this.events[e]&&this.events[e].forEach((function(e){e(t)}))},n.prototype.set_items=function(e){this.items=e},n.prototype.input_typing=function(e){var t=this,i=e.target.value;clearTimeout(t.typing_timeout),"Enter"!=e.key&&13!=e.keyCode?t.typing_timeout=setTimeout((function(){t.submit(i)}),t.typing_duration):t.submit(i)},n.prototype.submit=function(e){var t=this;if(e!=t.search_string){t.search_string=e;var i=t.search_items(t.search_string);t.event_dispatcher("search",{results:i,search_string:t.search_string})}},n.prototype.search_items=function(e){var t=this,i=[];return e=e.toLowerCase(),t.items.forEach((r=>{if("el"==t.search_fields)-1!==r.el.innerText.toLowerCase().indexOf(e)&&i.push(t.return_item(r));else if("object"==typeof t.search_fields)for(var n=0;n<t.search_fields.length;n++){var s=t.search_fields[n];if(void 0===r[s]||!r[s])return;if(-1!==r[s].toLowerCase().indexOf(e))return void i.push(t.return_item(r))}else{if(void 0===r[t.search_fields]||!r[t.search_fields])return;-1!==r[t.search_fields].toLowerCase().indexOf(e)&&i.push(t.return_item(r))}})),i},n.prototype.return_item=function(e){return e};const s=n;function o(e){var t=this;if(t.options=e,t.el=e.el,t.events=[],t.settings("items",null),t.settings("string_types",[]),"string"==typeof e.el){if(t.el=document.querySelector(e.el),!t.el)return void console.error("cannot find element ",e.el)}else t.el=e.el,void 0!==t.el[0]&&(t.el=t.el[0]);return t.current_selected=t.el.value,t.el.addEventListener("change",(e=>{t.sort(e.target.value)})),this}console.log("FF_Sort"),o.prototype.settings=function(e,t){void 0!==this.options[e]?this[e]=this.options[e]:this[e]=t},o.prototype.on=function(e,t){var i=this;void 0===i.events[e]&&(i.events[e]=[]),i.events[e].push(t)},o.prototype.event_dispatcher=function(e,t){void 0!==this.events[e]&&this.events[e].forEach((function(e){e(t)}))},o.prototype.set_items=function(e){this.items=e},o.prototype.sort=function(e){var t=this;if(e!=t.current_selected){t.current_selected=e;var i="desc",r=e.split("--");void 0!==r[1]&&(e=r[0],i=r[1]),-1!==t.options.string_types[e]?t.items.sort((function(t,r){return"desc"==i?t[e]>r[e]?-1:1:t[e]>r[e]?1:-1})):t.items.sort((function(t,r){return"desc"==i?r[e]-t[e]:t[e]-r[e]})),t.event_dispatcher("change",{results:t.items})}};const a=o;console.log(items_data),function(){var e=document.querySelector(".items"),t={tags:[]},i=[];items_data.posts.forEach((r=>{var n=document.createElement("div");n.classList.add("item");var s=document.createElement("h3");s.classList.add("title"),s.innerHTML=r.title+" - "+r.reactions,n.appendChild(s),e.appendChild(n),r.el=n,i.push(r),r.tags.forEach((e=>{-1===t.tags.indexOf(e)&&t.tags.push(e)}))})),t.tags.sort();var n=document.querySelector(".filter_tags_buttons"),o="";t.tags.forEach((e=>{o+='<button class="filter-item" data-filter-value="'+e+'">'+e+"</button>"})),n.innerHTML=o;var l=new r.Z({items:i,return_data:"all"});l.add_field({type:"items_multiple",el:".filter_tags_buttons"}),l.add_field({key:"reactions",type:"dropdown",el:".filter_reactions",filter_type:"range"}),l.on("update",(t=>{e.innerHTML="",t.items_to_show.forEach((t=>{e.append(t.el)}))}));var c=new a({items:i,el:".sort",string_types:["title"]});c.on("change",(function(t){console.log("on sort",t),e.innerHTML="",t.results.forEach((t=>{e.append(t.el)}))})),new s({items:i,el:".filter_search",return_data:"all",search_fields:["title","body"]}).on("search",(t=>{l.set_items(t.results),c.set_items(t.results),l.active_filters.length?l.update():(e.innerHTML="",t.results.forEach((t=>{e.append(t.el)})))}))}()},294:(e,t,i)=>{var r=i(787);!function(){var e=document.querySelector(".items"),t={brand:[],category:[]},i=[];items_data.products.forEach((r=>{var n=document.createElement("div");n.classList.add("item"),n.innerHTML=r.title,e.appendChild(n),r.el=n,i.push(r),-1===t.brand.indexOf(r.brand)&&t.brand.push(r.brand),-1===t.category.indexOf(r.category)&&t.category.push(r.category)})),t.brand.sort(),t.category.sort();var n=document.querySelector(".filter_brand"),s='<option value="">Brand</option>';t.brand.forEach((e=>{s+='<option value="'+e+'">'+e+"</option>"})),n.innerHTML=s,n=document.querySelector(".filter_category"),s="",t.category.forEach((e=>{s+='<button class="filter-item" data-filter-value="'+e+'">'+e+"</button>"})),n.innerHTML=s;var o=new r.Z({return_data:"el"}),a=[],l=document.querySelector(".filter_brand_con .selected_options");o.on("change_brand",(e=>{var t=e.value;if(t&&(console.log("change_brand"),-1===a.indexOf(t))){a.push(t);var i=document.createElement("button");i.innerText="x "+t,i.addEventListener("click",(()=>{var e=a.indexOf(t);console.log("remove",e,t),i.remove(),a.splice(e,1),o.filters.brand.splice(e,1),o.update()})),l.appendChild(i)}})),o.set_items(i),o.add_field({type:"dropdown_multiple",el:".filter_brand"}),o.add_field({type:"items_multiple",el:".filter_category"}),o.add_field({key:"price",type:"dropdown",el:".filter_price",filter_type:"range"}),o.on("update",(t=>{console.log("update",t.items_to_show,t.active_filters),e.innerHTML="",t.items_to_show.forEach((t=>{e.append(t)}))})),window.filters=o}()}}]);