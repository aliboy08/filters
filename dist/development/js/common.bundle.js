"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkfilters"] = self["webpackChunkfilters"] || []).push([["common"],{

/***/ "./src/js/filters.js":
/*!***************************!*\
  !*** ./src/js/filters.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nfunction Filters(options){\r\n    var _ = this;\r\n    _.options = options;\r\n    _.events = {};\r\n    _.items = [];\r\n    _.filters = {};\r\n    _.active_filters = [];\r\n    _.fields = {};\r\n    _.debounce;\r\n    _.settings('debounce_duration', 500);\r\n    _.settings('filter_return', 'id');\r\n}\r\n\r\nFilters.prototype.settings = function(option_key, default_value){\r\n    if( typeof this.options[option_key] !== 'undefined' ) {\r\n        this[option_key] = this.options[option_key];\r\n    }\r\n    else {\r\n        this[option_key] = default_value;\r\n    }\r\n} \r\n\r\nFilters.prototype.set_items = function(items){\r\n    this.items = items;\r\n}\r\n\r\nFilters.prototype.set = function(filter_key, filter_value){\r\n    this.filters[filter_key] = filter_value;\r\n}\r\n\r\nFilters.prototype.add = function(filter_key, value_to_add){\r\n    this.filters[filter_key].push(value_to_add);\r\n}\r\n\r\nFilters.prototype.remove = function(filter_key, value_to_remove){\r\n    var _ = this;\r\n    var index_to_remove = _.filters[filter_key].indexOf(value_to_remove);\r\n    if( index_to_remove !== -1 ) {\r\n        _.filters[filter_key].splice(index_to_remove, 1);\r\n    }\r\n}\r\n\r\nFilters.prototype.update = function(){\r\n    var _ = this;\r\n    var items_to_show = _.filter_items();\r\n    // console.log( 'update', { items_to_show } )\r\n    _.event_dispatcher( 'update', { items_to_show: items_to_show, active_filters: _.active_filters } );\r\n}\r\n\r\nFilters.prototype.debounced_update = function(){\r\n    var _ = this;\r\n    clearTimeout(_.debounce);\r\n    _.debounce = setTimeout(function(){\r\n        _.update();\r\n    }, _.debounce_duration);\r\n}\r\n\r\nFilters.prototype.on = function( event_name, fn ){\r\n    var _ = this;\r\n    if( typeof _.events[event_name] === 'undefined' ) {\r\n        _.events[event_name] = [];\r\n    }\r\n    _.events[event_name].push(fn);\r\n}\r\n\r\nFilters.prototype.event_dispatcher = function( event_name, params ){\r\n    var _ = this;\r\n    if( typeof _.events[event_name] !== 'undefined' ) {\r\n        _.events[event_name].forEach(function(fn){\r\n            fn(params);\r\n        })\r\n    }\r\n}\r\n\r\nFilters.prototype.add_field = function(options){\r\n    var _ = this;\r\n    // _.fields[options.id] = options;\r\n    switch( options.type ) {\r\n        case 'items_single': _.init_type_items_single(options); break;\r\n        case 'items_multiple': _.init_type_items_multiple(options); break;\r\n        // case 'rating': _.init_type_rating(options); break;\r\n        // case 'slider': _.init_type_slider(options); break;\r\n        case 'dropdown': _.init_type_dropdown(options); break;\r\n        case 'dropdown_multiple': _.init_type_dropdown_multiple(options); break;\r\n    }\r\n}\r\n\r\nFilters.prototype.prepare_field = function(options){\r\n    var _ = this;\r\n\r\n    if( typeof options.el === 'string' ) {\r\n        // selector\r\n        var el = document.querySelector(options.el);\r\n        if( !el ) {\r\n            console.error('cannot find element ', options.el);\r\n            return; // can't find element, exit\r\n        }\r\n    }\r\n    else {\r\n        // dom element\r\n        var el = options.el;\r\n        if( typeof el[0] !== 'undefined' ) el = el[0]; // jquery support\r\n    }\r\n\r\n    var filter_key = typeof options.key !== 'undefined' ? options.key : el.dataset.filterKey;\r\n    _.fields[filter_key] = options;\r\n\r\n    var filter_type = typeof options.key !== 'undefined' ? options.filter_type : 'default';\r\n    var field = _.fields[filter_key];\r\n    \r\n    field.el = el;\r\n    field.key = filter_key;\r\n    field.filter_type = filter_type;\r\n    \r\n    return field;\r\n}\r\n\r\nFilters.prototype.filter_items = function(){\r\n    var _ = this;\r\n\r\n    _.active_filters = _.get_active_filters();\r\n\r\n    var items_to_show = [];\r\n\r\n    if( _.filter_return == 'all' ) {\r\n        _.items.forEach(function(item){\r\n            if( _.show_item(item, _.active_filters ) ) {\r\n                items_to_show.push(item);\r\n            }\r\n        });\r\n    }\r\n    else {\r\n        _.items.forEach(function(item){\r\n            if( _.show_item(item, _.active_filters ) ) {\r\n                items_to_show.push(item[_.filter_return]);\r\n            }\r\n        });\r\n    }\r\n\r\n    return items_to_show;\r\n}\r\n\r\nFilters.prototype.show_item = function(item, filters){\r\n    var _ = this;\r\n\r\n    for( var i = 0; i < filters.length; i++ ) {\r\n\r\n        var filter = filters[i];\r\n        var item_value = item[filter.key];\r\n\r\n        console.log( filter.key, filter.value );\r\n\r\n        if( _.fields[filter.key].filter_type == 'range' ) {\r\n            var filter_values = filter.value.split(',');\r\n            var filter_value_min = parseInt(filter_values[0]);\r\n            var filter_value_max = parseInt(filter_values[1]);\r\n            console.log( filter_value_min, filter_value_max )\r\n            if( filter_value_min > item_value || filter_value_max < item_value ) {\r\n                return false;\r\n            }\r\n            continue;\r\n        }\r\n        \r\n        if( typeof filter.value === 'object' ) {\r\n            // filter value: array\r\n\r\n            if( typeof item_value === 'object' ) {\r\n                // item value: array\r\n                var array_item_found = false;\r\n                for( var j = 0; j < item_value.length; j++ ) {\r\n                    if( filter.value.indexOf(item_value[j]) !== -1 ) {\r\n                        array_item_found = true;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if( !array_item_found ) {\r\n                    return false;\r\n                }\r\n\r\n            }\r\n            else {\r\n                // item value: single\r\n                if( filter.value.indexOf(item_value) === -1 ) {\r\n                    return false;\r\n                }\r\n            }\r\n            \r\n        }\r\n        else {\r\n\r\n            if( typeof item_value === 'object' ) {\r\n                if( item_value.indexOf( filter.value ) === -1 ) {\r\n                    return false;\r\n                }\r\n            }\r\n            else {\r\n                // filter value: single, direct compare\r\n                if( item_value != filter.value ) {\r\n                    return false;\r\n                }\r\n            }\r\n            \r\n        }\r\n        \r\n    }\r\n\r\n    // passed, show item\r\n    return true;\r\n}\r\n\r\nFilters.prototype.get_active_filters = function(){\r\n    var _ = this;\r\n    var filters_to_check = [];\r\n    \r\n    Object.keys(_.filters).forEach(function(filter_key){\r\n        var filter_value = _.filters[filter_key];\r\n        \r\n        if( typeof filter_value === 'object' && !filter_value.length ) return;\r\n        if( !filter_value ) return;\r\n    \r\n        filters_to_check.push({\r\n            key: filter_key,\r\n            value: filter_value,\r\n        });\r\n    });\r\n    \r\n    return filters_to_check;\r\n}\r\n\r\nFilters.prototype.init_type_dropdown = function(options){\r\n    var _ = this;\r\n    var field = _.prepare_field(options);\r\n    field.current_value = '';\r\n    \r\n    options.el.addEventListener('change', function(e){\r\n\r\n        _.event_dispatcher( 'change_'+ field.key, { el: e.target, value: this.value, key: field.key } );\r\n\r\n        if( this.value == field.current_value ) return; // no change\r\n        field.current_value = this.value;\r\n        _.set( field.key, this.value );\r\n        _.update();\r\n    });\r\n    \r\n    // populate dropdown choices\r\n    if( typeof options.choices !== 'undefined' ) {\r\n        options.choices.forEach(function(choice){\r\n            options.el.append('<option value=\"'+ choice +'\">'+ choice +'</option>');\r\n        })\r\n    }\r\n}\r\n\r\nFilters.prototype.init_type_dropdown_multiple = function(options){\r\n    var _ = this;\r\n    var field = _.prepare_field(options);\r\n    _.filters[field.key] = [];\r\n    \r\n    options.el.addEventListener('change', function(e){\r\n\r\n        if( !this.value ) return;\r\n\r\n        if( _.filters[field.key].indexOf(this.value) !== -1 ) {\r\n            // already selected, unselect/remove\r\n            // _.remove(field.key, this.value);\r\n            return;\r\n        }\r\n\r\n        _.event_dispatcher( 'change_'+ field.key, { el: e.target, value: this.value, key: field.key } );\r\n        _.add(field.key, this.value);\r\n        _.update();\r\n        options.el.value = '';\r\n    });\r\n    \r\n    // populate dropdown choices\r\n    if( typeof options.choices !== 'undefined' ) {\r\n        options.choices.forEach(function(choice){\r\n            options.el.append('<option value=\"'+ choice +'\">'+ choice +'</option>');\r\n        })\r\n    }\r\n}\r\n\r\nFilters.prototype.init_type_items_single = function(options){\r\n\r\n    var _ = this;\r\n    var field = _.prepare_field(options);\r\n    field.items = options.el.querySelectorAll('.filter-item');\r\n    field.current_selected = options.el.querySelector('.selected');\r\n    \r\n    field.items.forEach(item=>{\r\n\r\n        item.addEventListener('click',(e)=>{\r\n            \r\n            if( item.classList.contains('selected') ) {\r\n                if( typeof options.unselect !== 'undefined' && !options.unselect ) return;\r\n    \r\n                // unselect\r\n                item.classList.remove('selected');\r\n                field.current_selected = null;\r\n                \r\n                var filter_value = '';\r\n            }\r\n            else {\r\n                // select\r\n                item.classList.add('selected');\r\n    \r\n                // unselect previous item\r\n                if( field.current_selected ) field.current_selected.classList.remove('selected');\r\n                field.current_selected = item;\r\n                \r\n                var filter_value = item.dataset.filterValue;\r\n            }\r\n\r\n            _.set( field.key, filter_value );\r\n            _.event_dispatcher( 'change_'+ field.key, { el: e.target, value: filter_value, key: field.key } );\r\n            _.update();\r\n        })\r\n\r\n    });\r\n\r\n}\r\n\r\nFilters.prototype.init_type_items_multiple = function(options){\r\n    var _ = this;\r\n    var field = _.prepare_field(options);\r\n    _.filters[field.key] = [];\r\n    field.items = options.el.querySelectorAll('.filter-item');\r\n    field.items.forEach(item=>{\r\n        item.addEventListener('click',(e)=>{\r\n            var filter_value = item.dataset.filterValue;\r\n            item.classList.toggle('selected');\r\n            if( item.classList.contains('selected') ) {\r\n                _.add(field.key, filter_value);\r\n            } else {\r\n                _.remove(field.key, filter_value);\r\n            }\r\n\r\n            _.event_dispatcher( 'change_'+ field.key, { el: e.target, value: filter_value, key: field.key } );\r\n            _.debounced_update();\r\n        })\r\n    });\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Filters);\n\n//# sourceURL=webpack://filters/./src/js/filters.js?");

/***/ }),

/***/ "./src/js/posts.js":
/*!*************************!*\
  !*** ./src/js/posts.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _filters__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./filters */ \"./src/js/filters.js\");\n\r\n\r\nconsole.log(items_data);\r\n\r\nfunction init(){\r\n    \r\n    var items_con = document.querySelector('.items');\r\n\r\n    var filter_options = {\r\n        tags: [],\r\n    };\r\n\r\n    var items = [];\r\n    \r\n    items_data.posts.forEach(item_data=>{\r\n        \r\n        // create items\r\n        var item = document.createElement('div');\r\n        item.classList.add('item');\r\n        item.innerHTML = item_data.title;\r\n        items_con.appendChild(item);\r\n\r\n        item_data.el = item;\r\n\r\n        items.push(item_data);\r\n        \r\n        // create filter options\r\n        item_data.tags.forEach(item_tag=>{\r\n            if( filter_options.tags.indexOf( item_tag ) === -1 ) {\r\n                filter_options.tags.push( item_tag );\r\n            }\r\n        })\r\n        \r\n    });\r\n\r\n    filter_options.tags.sort();\r\n    \r\n    // populate tags options\r\n    // var temp_el = document.querySelector('.filter_tags');\r\n    // var temp_html = `<option value=\"\">Tags</option>`;\r\n    // filter_options.tags.forEach(item=>{\r\n    //     temp_html += '<option value=\"'+ item +'\">'+ item +'</option>';\r\n    // });\r\n    // temp_el.innerHTML = temp_html;\r\n\r\n    // populate category buttons\r\n    var temp_el = document.querySelector('.filter_tags_buttons');\r\n    var temp_html = '';\r\n    filter_options.tags.forEach(item=>{\r\n        temp_html += '<button class=\"filter-item\" data-filter-value=\"'+ item +'\">'+ item +'</button>';\r\n    })\r\n    temp_el.innerHTML = temp_html;\r\n\r\n    var filters = new _filters__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\r\n        filter_return: 'all',\r\n    });\r\n\r\n    // var selected_options = [];\r\n    // var selected_options_con = document.querySelector('.filter_tags_con .selected_options');\r\n    // filters.on('change_tags',(res)=>{\r\n    //     var value = res.value;\r\n    //     if( !value )  return; \r\n\r\n    //     console.log( 'change_tags', value )\r\n\r\n    //     // add filter indicators - on click remove\r\n    //     if( selected_options.indexOf(value) === -1 ) {\r\n    //         selected_options.push(value);\r\n    //         var button = document.createElement('button');\r\n    //         button.innerText = 'x '+ value;\r\n    //         button.addEventListener('click',()=>{\r\n    //             var index = selected_options.indexOf(value);\r\n    //             console.log( 'remove', index, value );\r\n    //             button.remove();\r\n    //             selected_options.splice(index, 1);\r\n    //             filters.filters.tags.splice(index, 1);\r\n    //             filters.update();\r\n    //         });\r\n    //         selected_options_con.appendChild(button);\r\n    //     }\r\n    // });\r\n    \r\n    filters.set_items(items);\r\n\r\n    // filters.add_field({\r\n    //     // type: 'dropdown_multiple',\r\n    //     type: 'dropdown',\r\n    //     el: '.filter_tags',\r\n    // });\r\n\r\n    filters.add_field({\r\n        type: 'items_multiple',\r\n        el: '.filter_tags_buttons',\r\n    });\r\n\r\n    filters.add_field({\r\n        key: 'reactions',\r\n        type: 'dropdown',\r\n        el: '.filter_reactions',\r\n        filter_type: 'range',\r\n    });\r\n\r\n    filters.on('update',(res)=>{\r\n        items_con.innerHTML = '';\r\n        res.items_to_show.forEach(item=>{\r\n            items_con.append(item.el);\r\n        })\r\n    });\r\n\r\n    window.filters = filters;\r\n\r\n}\r\ninit();\n\n//# sourceURL=webpack://filters/./src/js/posts.js?");

/***/ }),

/***/ "./src/js/products.js":
/*!****************************!*\
  !*** ./src/js/products.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _filters__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./filters */ \"./src/js/filters.js\");\n\r\n\r\nfunction init(){\r\n    \r\n    var items_con = document.querySelector('.items');\r\n\r\n    var filters_dropdown = {\r\n        brand: [],\r\n        category: [],\r\n    };\r\n\r\n    var items = [];\r\n    \r\n    items_data.products.forEach(item_data=>{\r\n        \r\n        // create items\r\n        var item = document.createElement('div');\r\n        item.classList.add('item');\r\n        // item.innerHTML = item_data.title;\r\n        item.style.backgroundImage = 'url('+ item_data.thumbnail +')';\r\n        items_con.appendChild(item);\r\n\r\n        item_data.el = item;\r\n\r\n        items.push(item_data);\r\n        \r\n        // create filter options\r\n        if( filters_dropdown.brand.indexOf( item_data.brand ) === -1 ) {\r\n            filters_dropdown.brand.push( item_data.brand );\r\n        }\r\n\r\n        if( filters_dropdown.category.indexOf( item_data.category ) === -1 ) {\r\n            filters_dropdown.category.push( item_data.category );\r\n        }\r\n        \r\n    });\r\n\r\n    filters_dropdown.brand.sort();\r\n    filters_dropdown.category.sort();\r\n    \r\n    // populate brand options\r\n    var temp_el = document.querySelector('.filter_brand');\r\n    var temp_html = `<option value=\"\">Brand</option>`;\r\n    filters_dropdown.brand.forEach(item=>{\r\n        temp_html += '<option value=\"'+ item +'\">'+ item +'</option>';\r\n    });\r\n    temp_el.innerHTML = temp_html;\r\n\r\n    // populate category buttons\r\n    var temp_el = document.querySelector('.filter_category');\r\n    var temp_html = '';\r\n    filters_dropdown.category.forEach(item=>{\r\n        temp_html += '<button class=\"filter-item\" data-filter-value=\"'+ item +'\">'+ item +'</button>';\r\n    })\r\n    temp_el.innerHTML = temp_html;\r\n\r\n\r\n    var filters = new _filters__WEBPACK_IMPORTED_MODULE_0__[\"default\"]({\r\n        filter_return: 'el',\r\n    });\r\n\r\n    var selected_brands = [];\r\n    var selected_brands_con = document.querySelector('.filter_brand_con .selected_options');\r\n    filters.on('change_brand',(res)=>{\r\n        var brand = res.value;\r\n        if( !brand ) {\r\n            return;\r\n        }\r\n\r\n        console.log( 'change_brand', )\r\n\r\n        // add filter indicators - on click remove\r\n        if( selected_brands.indexOf(brand) === -1 ) {\r\n            selected_brands.push(brand);\r\n            var button = document.createElement('button');\r\n            button.innerText = 'x '+ brand;\r\n            button.addEventListener('click',()=>{\r\n                var index = selected_brands.indexOf(brand);\r\n                console.log( 'remove', index, brand );\r\n                button.remove();\r\n                selected_brands.splice(index, 1);\r\n                filters.filters.brand.splice(index, 1);\r\n                filters.update();\r\n            });\r\n            selected_brands_con.appendChild(button);\r\n        }\r\n    });\r\n    \r\n    filters.set_items(items);\r\n\r\n    filters.add_field({\r\n        type: 'dropdown_multiple',\r\n        el: '.filter_brand',\r\n    });\r\n\r\n    filters.add_field({\r\n        type: 'items_multiple',\r\n        el: '.filter_category',\r\n    });\r\n\r\n    filters.add_field({\r\n        key: 'price',\r\n        type: 'dropdown',\r\n        el: '.filter_price',\r\n        filter_type: 'range',\r\n    });\r\n\r\n    filters.on('update',(res)=>{\r\n        console.log('update', res.items_to_show, res.active_filters )\r\n        items_con.innerHTML = '';\r\n        res.items_to_show.forEach(el=>{\r\n            items_con.append(el);\r\n        })\r\n    });\r\n\r\n    window.filters = filters;\r\n\r\n}\r\ninit();\n\n//# sourceURL=webpack://filters/./src/js/products.js?");

/***/ })

}]);